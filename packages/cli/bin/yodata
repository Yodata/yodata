#!/usr/bin/env node

const client = require('..')
const _ = require('lodash')

const pkg = require('../package.json')
const logger = require('../lib/logger')
const errorOut = require('../lib/error-out')

logger.debug(_.repeat('-', 70))
logger.debug('Command:      ', process.argv.join(' '))
logger.debug('CLI Version:  ', pkg.version)
logger.debug('Platform:     ', process.platform)
logger.debug('Node Version: ', process.version)
logger.debug('Time:         ', new Date().toString())
logger.debug(_.repeat('-', 70))

process.on('exit', CODE => {
	logger.debug(`exit code: ${CODE}`)
})

process.on('uncaughtException', err => {
	errorOut(client, err)
})

client.cli.parse(process.argv)
